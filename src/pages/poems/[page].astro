---
export async function getStaticPaths({ paginate }) {
    const allPosts = await Astro.glob('./*.mdx');
    const tags = [...new Set(allPosts.map((post) => post.frontmatter.tags).flat())];
    const allPostsFiltered = allPosts.sort((a, b) => new Date(b.frontmatter.pubDate).valueOf() - new Date(a.frontmatter.pubDate).valueOf());
    return paginate(allPostsFiltered, { 
        pageSize: 12, 
        props: { tags: tags } 
    });
}
const { page, tags } = Astro.props;
import Layout from '../../layouts/Layout.astro';
import PoemCard from '../../components/PoemCard.astro';
import PoemPagination from '../../components/PoemPagination.astro';
let title = `Poems - Page ${page.currentPage} by Psoems`;
let description = `List of guides, tutorials, and resources for you to learn and master web development - Page ${page.currentPage}`;
let url = `https://www.thiagomontezuma.com/posts/${page.currentPage}`;
let robots = 'index, follow';
---
<Layout title={title} description={description} url={url} robots={robots}>
    <div class="mt-3 max-w-screen-xl">
        <h1 class="text-4xl text-center font-bold mb-8">Poems</h1>
        <!-- <BlogTagsPageLink requestPageUrlPath={Astro.url.pathname.split('/')[1]} tags={tags}></BlogTagsPageLink> -->
        <div class="grid grid-cols-12 mb-6 gap-y-12">
            {page.data.map(posts => 
                // 3xl:col-span-3
                <article class="col-span-12 md:col-span-6 xl:col-span-4 px-6 xl:px-4" data-post-id={posts.frontmatter.id} data-title={posts.frontmatter.title} data-subtitle={posts.frontmatter.subtitle} data-description={posts.frontmatter.description} data-tags={posts.frontmatter.tags.map(item => item)}>
                    <PoemCard post={posts} url={Astro.url.href} />
                </article>
            )}
        </div>
        <PoemPagination currentPage={page.currentPage} lastPage={page.lastPage} requestPageUrlPath={Astro.url.pathname.split('/')[1]} />
    </div>
</Layout>